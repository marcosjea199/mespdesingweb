<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto de Diseño Web Corporativo | Marcos Espinoza Portafolio</title>
    <meta name="description"
        content="Explora el proyecto de diseño web corporativo para [Nombre del Cliente]. Una solución moderna y profesional que refleja la identidad de la marca y optimiza la experiencia del usuario.">
    <meta name="keywords"
        content="diseño web corporativo, sitio web a medida, branding digital, portfolio de diseño, caso de estudio, UX/UI, proyecto web profesional">
    <meta name="author" content="Marcos Espinoza">

    <meta property="og:title" content="Caso de estudio: [Nombre del Cliente] - Diseño web">
    <meta property="og:description"
        content="Cómo transformé la presencia digital de [Nombre del Cliente] con un diseño web estratégico y una experiencia de usuario intuitiva.">
    <meta property="og:url" content="https://www.mespdesingweb.com/portfolio/proyectos/proyecto-1.html">
    <meta property="og:image" content="https://www.mespdesingweb.com/assets/images/og-portfolio.jpg">
    <meta property="og:type" content="website">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@mespdesingweb">
    <meta name="twitter:creator" content="@mespdesingweb">
    <meta name="twitter:title" content="Caso de estudio: [Nombre del Cliente] - Diseño web">
    <meta name="twitter:description"
        content="Cómo transformé la presencia digital de [Nombre del Cliente] con un diseño web estratégico y una experiencia de usuario intuitiva.">
    <meta name="twitter:image" content="https://www.mespdesingweb.com/assets/images/og-portfolio.jpg">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Nunito+Sans:opsz,wght@6..12,400;6..12,700&display=swap"
        rel="stylesheet">

    <link href="../../assets/css/base.css" rel="stylesheet">
    <link href="../../assets/css/components.css" rel="stylesheet">
    <link href="../../assets/css/pages/portfolio-proyecto.css" rel="stylesheet">
    <script src="../../assets/js/i18n.js" defer></script>
    <script src="../../assets/js/theme.js" defer></script>
</head>

<body data-page-id="proyecto-1">

    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top shadow-sm py-3">
            <div class="container">
                <a class="navbar-brand" href="../../index.html">
                    <img src="../../assets/images/logos/logo-1.webp" alt="Logo de Marcos Espinoza" width="40"
                        height="40" class="d-inline-block align-text-middle me-2">
                    <span class="fw-bold">Marcos Espinoza</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="../../servicios.html"
                                data-i18n="nav_servicios">Servicios</a></li>
                        <li class="nav-item"><a class="nav-link" href="../../portfolio.html"
                                data-i18n="nav_portfolio">Portafolio</a></li>
                        <li class="nav-item"><a class="nav-link" href="../../sobre-mi.html"
                                data-i18n="nav_sobre_mi">Sobre Mí</a></li>
                        <li class="nav-item"><a class="nav-link" href="../../contacto.html"
                                data-i18n="nav_contacto">Contacto</a></li>
                    </ul>
                    <div class="lang-switcher ms-3 d-flex align-items-center">
                        <button class="btn btn-sm btn-outline-secondary me-2" data-lang="es">ES</button>
                        <button class="btn btn-sm btn-outline-secondary" data-lang="en">EN</button>
                    </div>
                    <div class="theme-switcher d-flex align-items-center ms-3">
                        <button id="theme-toggle" class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-moon-fill"></i>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main id="project-main-content">
        <!-- Header del proyecto -->
        <header class="row align-items-center g-4 mb-4">
            <div class="col-12 col-md-6">
                <h1 id="project-title" class="display-5 fw-bold mb-3">Cargando…</h1>
                <p id="project-excerpt" class="lead text-muted mb-3"></p>

                <ul class="list-unstyled small mb-4">
                    <li id="project-client" class="mb-1 d-none"><strong>Cliente:</strong> <span></span></li>
                    <li id="project-services" class="mb-1 d-none"><strong>Servicios:</strong> <span></span></li>
                    <li id="project-tech" class="mb-1 d-none"><strong>Tecnologías:</strong> <span></span></li>
                </ul>

                <a href="/portfolio.html" class="btn btn-outline-primary btn-sm">← Volver al portfolio</a>
            </div>

            <div class="col-12 col-md-6 text-center">
                <img id="project-cover" src="" alt="" class="img-fluid rounded shadow" width="960" height="540"
                    loading="eager">
            </div>
        </header>

        <!-- Contenido largo -->
        <section class="row g-4">
            <div class="col-12 col-lg-8">
                <article class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="h4 mb-3">Resumen</h2>
                        <div id="project-description" class="text-body-secondary">
                            <!-- Aquí va la descripción larga (HTML seguro o texto) -->
                        </div>
                    </div>
                </article>
            </div>

            <aside class="col-12 col-lg-4">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h3 class="h6 text-uppercase text-muted mb-3">Galería</h3>
                        <div id="project-gallery" class="row g-3">
                            <!-- Thumbs -->
                        </div>
                    </div>
                </div>
            </aside>
        </section>
    </main>

    <footer class="bg-dark text-white pt-5 pb-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="d-flex align-items-center mb-3">
                        <img src="../../assets/images/logos/logo-1.webp" alt="Logo de Marcos Espinoza" width="40"
                            height="40" class="me-2">
                        <span class="fs-4 fw-bold" data-i18n="footer_titulo">Marcos Espinoza</span>
                    </div>
                    <p class="text-muted" data-i18n="footer_parrafo">Desarrollo y diseño web profesional para ayudarte a
                        crecer.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3" data-i18n="footer_enlaces_rapidos">Enlaces Rápidos</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="../../servicios.html" class="text-decoration-none text-muted"
                                data-i18n="nav_servicios">Servicios</a></li>
                        <li class="mb-2"><a href="../../portfolio.html" class="text-decoration-none text-muted"
                                data-i18n="nav_portfolio">Portafolio</a></li>
                        <li class="mb-2"><a href="../../sobre-mi.html" class="text-decoration-none text-muted"
                                data-i18n="nav_sobre_mi">Sobre Mí</a></li>
                        <li class="mb-2"><a href="../../contacto.html" class="text-decoration-none text-muted"
                                data-i18n="nav_contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3" data-i18n="footer_sigueme">Sígueme</h5>
                    <a href="https://www.linkedin.com/in/marcosjea199/" class="text-decoration-none me-3"
                        aria-label="LinkedIn"><i class="bi bi-linkedin fs-4 text-white"></i></a>
                    <a href="https://github.com/marcosjea199" class="text-decoration-none me-3" aria-label="GitHub"><i
                            class="bi bi-github fs-4 text-white"></i></a>
                    <a href="https://instagram.com/mespdesingweb" class="text-decoration-none me-3"
                        aria-label="Instagram"><i class="bi bi-instagram fs-4 text-white"></i></a>
                    <a href="https://x.com/mespdesingweb" class="text-decoration-none me-3" aria-label="Twitter"><i
                            class="bi bi-twitter-x fs-4 text-white"></i></a>
                </div>
            </div>
            <hr class="border-secondary mt-2 mb-3">
            <div class="text-center">
                <p class="mb-0 text-muted" data-i18n="footer_copyright">© 2025 Marcos Espinoza. Todos los derechos
                    reservados.</p>
                <a href="../../legal/politica-privacidad.html" class="text-muted me-3">Política de Privacidad</a>
                <a href="../../legal/terminos-condiciones.html" class="text-muted me-3">Términos y Condiciones</a>
                <a href="../../legal/cookies.html" class="text-muted">Política de Cookies</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/main.js"></script>

    <!-- Script dinámico -->
    <script>
        (function () {
            const JSON_SRC = '/assets/data/portfolio/projects.json'; // ajusta si es otra ruta

            function getSlug() {
                // 1) ?slug=mi-proyecto
                const q = new URLSearchParams(location.search).get('slug');
                if (q) return q;

                // 2) Último segmento de la URL: /proyectos/mi-proyecto o /proyectos/mi-proyecto.html
                const segs = location.pathname.replace(/\/+$/, '').split('/');
                let last = segs[segs.length - 1] || '';
                last = last.replace(/\.html?$/i, '');
                return last || null;
            }

            function normalizeItems(data) {
                if (Array.isArray(data)) return data;
                if (Array.isArray(data.projects)) return data.projects;
                if (data.data) {
                    if (Array.isArray(data.data.projects)) return data.data.projects;
                    if (Array.isArray(data.data.items)) return data.data.items;
                }
                return [];
            }

            function slugify(str) {
                return String(str || '')
                    .toLowerCase()
                    .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }

            function findProject(items, slug) {
                // 1) match exacto por item.slug
                let p = items.find(it => it.slug && it.slug === slug);
                if (p) return p;

                // 2) por URL conteniendo slug
                p = items.find(it => (it.url || '').includes(slug));
                if (p) return p;

                // 3) por título "slugificado"
                p = items.find(it => slugify(it.title || it.name) === slug);
                return p || null;
            }

            function setText(id, value, formatter) {
                const el = document.getElementById(id);
                if (!el) return;
                if (formatter === 'html') {
                    el.innerHTML = value || '';
                } else {
                    el.textContent = value || '';
                }
            }

            function setMeta(name, content) {
                if (!content) return;
                let el = document.querySelector(`meta[name="${name}"]`);
                if (!el) {
                    el = document.createElement('meta');
                    el.setAttribute('name', name);
                    document.head.appendChild(el);
                }
                el.setAttribute('content', content);
            }

            function setOG(property, content) {
                if (!content) return;
                let el = document.querySelector(`meta[property="${property}"]`);
                if (!el) {
                    el = document.createElement('meta');
                    el.setAttribute('property', property);
                    document.head.appendChild(el);
                }
                el.setAttribute('content', content);
            }

            function setCanonical(url) {
                if (!url) return;
                let link = document.querySelector('link[rel="canonical"]');
                if (!link) {
                    link = document.createElement('link');
                    link.setAttribute('rel', 'canonical');
                    document.head.appendChild(link);
                }
                link.setAttribute('href', new URL(url, document.baseURI).href);
            }

            function render(project) {
                const title = project.title || project.name || 'Proyecto';
                const excerpt = project.excerpt || project.description || '';
                const longDesc = project.long_description || project.description_long || '';
                const client = project.client || '';
                const services = (project.services || []).join(', ');
                const tech = (project.tech || project.technologies || []).join(', ');

                // Imagen principal
                let imgSrc = '';
                let imgAlt = project.image_alt || title;
                if (typeof project.image === 'string') {
                    imgSrc = project.image;
                } else if (project.image && typeof project.image === 'object') {
                    imgSrc = project.image.jpg || project.image.webp || project.image.src || '';
                    imgAlt = project.image.alt || imgAlt;
                } else if (project.thumbnail) {
                    imgSrc = project.thumbnail;
                }

                // Título / excerpt / meta
                document.title = `${title} — Portfolio`;
                setText('project-title', title);
                setText('project-excerpt', excerpt);
                setText('bc-current', title);
                if (longDesc) setText('project-description', longDesc, 'html');

                // Meta SEO (nota: algunos bots sociales no ejecutan JS)
                setMeta('description', excerpt || longDesc?.slice(0, 155));
                setOG('og:title', title);
                setOG('og:description', excerpt || longDesc?.slice(0, 155));
                setOG('og:image', imgSrc);
                setCanonical(project.url || location.href);

                // Imagen cover
                const cover = document.getElementById('project-cover');
                if (cover && imgSrc) {
                    cover.src = imgSrc;
                    cover.alt = imgAlt || title;
                    cover.loading = 'eager';
                    cover.decoding = 'async';
                } else if (cover) {
                    cover.classList.add('d-none');
                }

                // Metadatos (cliente / servicios / tech)
                const cEl = document.getElementById('project-client');
                if (client && cEl) { cEl.querySelector('span').textContent = client; cEl.classList.remove('d-none'); }
                const sEl = document.getElementById('project-services');
                if (services && sEl) { sEl.querySelector('span').textContent = services; sEl.classList.remove('d-none'); }
                const tEl = document.getElementById('project-tech');
                if (tech && tEl) { tEl.querySelector('span').textContent = tech; tEl.classList.remove('d-none'); }

                // Galería
                const gal = document.getElementById('project-gallery');
                if (gal && Array.isArray(project.gallery) && project.gallery.length) {
                    gal.innerHTML = '';
                    project.gallery.forEach(src => {
                        const col = document.createElement('div');
                        col.className = 'col-6';
                        col.innerHTML = `
          <a href="${src}" target="_blank" rel="noopener">
            <img src="${src}" class="img-fluid rounded" alt="${title}" loading="lazy">
          </a>
        `;
                        gal.appendChild(col);
                    });
                }
            }

            async function init() {
                const slug = getSlug();
                if (!slug) { location.href = '/404.html'; return; }

                try {
                    const res = await fetch(JSON_SRC, { cache: 'no-store' });
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);
                    const data = await res.json();
                    const items = normalizeItems(data);
                    const project = findProject(items, slug);

                    if (!project) { location.href = '/404.html'; return; }
                    render(project);

                    // JSON-LD (schema.org) mejorando SEO
                    const ld = {
                        "@context": "https://schema.org",
                        "@type": "CreativeWork",
                        "name": project.title || project.name,
                        "description": project.excerpt || project.description,
                        "image": (project.image && (project.image.jpg || project.image.webp || project.image.src)) || project.image || "",
                        "url": project.url || location.href
                    };
                    const script = document.createElement('script');
                    script.type = 'application/ld+json';
                    script.text = JSON.stringify(ld);
                    document.head.appendChild(script);

                } catch (err) {
                    console.error('Error cargando proyecto:', err);
                    location.href = '/404.html';
                }
            }

            document.addEventListener('DOMContentLoaded', init);
        })();
    </script>
</body>

</html>