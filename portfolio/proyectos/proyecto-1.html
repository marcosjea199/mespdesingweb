<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto de Diseño Web Corporativo | Marcos Espinoza Portafolio</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Explora el proyecto de diseño web corporativo para [Nombre del Cliente]. Una solución moderna y profesional que refleja la identidad de la marca y optimiza la experiencia del usuario.">
    <meta name="keywords"
        content="diseño web corporativo, sitio web a medida, branding digital, portfolio de diseño, caso de estudio, UX/UI, proyecto web profesional">
    <meta name="author" content="Marcos Espinoza">

    <meta property="og:title" content="Caso de estudio: [Nombre del Cliente] - Diseño web">
    <meta property="og:description"
        content="Cómo transformé la presencia digital de [Nombre del Cliente] con un diseño web estratégico y una experiencia de usuario intuitiva.">
    <meta property="og:url" content="https://www.mespdesingweb.com/portfolio/proyectos/proyecto-1.html">
    <meta property="og:image" content="https://www.mespdesingweb.com/assets/images/og-portfolio.jpg">
    <meta property="og:type" content="website">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@mespdesingweb">
    <meta name="twitter:creator" content="@mespdesingweb">
    <meta name="twitter:title" content="Caso de estudio: [Nombre del Cliente] - Diseño web">
    <meta name="twitter:description"
        content="Cómo transformé la presencia digital de [Nombre del Cliente] con un diseño web estratégico y una experiencia de usuario intuitiva.">
    <meta name="twitter:image" content="https://www.mespdesingweb.com/assets/images/og-portfolio.jpg">

    <!-- Bootstrap Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Nunito+Sans:opsz,wght@6..12,400;6..12,700&display=swap"
        rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../assets/css/base.css" rel="stylesheet">
    <link href="../../assets/css/components.css" rel="stylesheet">
    <link href="../../assets/css/pages/portfolio-proyecto.css" rel="stylesheet">

    <!-- Scripts -->
    <script src="../../assets/js/i18n.js" defer></script>
    <script src="../../assets/js/theme.js" defer></script>
</head>

<body data-page-id="proyecto-1">

    <header>
        <!-- NavBar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top shadow-sm py-3">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="assets/images/logos/logo-1.webp" alt="Logo de Marcos Espinoza" width="40" height="40"
                        class="d-inline-block align-text-middle me-2">
                    <span class="fw-bold">Marcos Espinoza</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="servicios.html"
                                data-i18n="nav_servicios">Servicios</a></li>
                        <li class="nav-item"><a class="nav-link" href="portfolio.html"
                                data-i18n="nav_portfolio">Portafolio</a></li>
                        <li class="nav-item"><a class="nav-link" href="sobre-mi.html" data-i18n="nav_sobre_mi">Sobre
                                Mí</a></li>
                        <li class="nav-item"><a class="nav-link" href="contacto.html"
                                data-i18n="nav_contacto">Contacto</a></li>
                    </ul>
                    <div class="lang-switcher ms-3 d-flex align-items-center">
                        <button class="btn btn-sm btn-outline-secondary me-2" data-lang="es">ES</button>
                        <button class="btn btn-sm btn-outline-secondary" data-lang="en">EN</button>
                    </div>
                    <div class="theme-switcher d-flex align-items-center ms-3">
                        <button id="theme-toggle" class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-moon-fill"></i>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
        <!-- // end NavBar // -->
    </header>

    <main id="project-main-content">
        <!-- Header del proyecto -->
        <header class="row align-items-center g-4 mb-4">
            <div class="col-12 col-md-6">
                <h1 id="project-title" class="display-5 fw-bold mb-3">Cargando…</h1>
                <p id="project-excerpt" class="lead text-muted mb-3"></p>

                <ul class="list-unstyled small mb-4">
                    <li id="project-client" class="mb-1 d-none"><strong>Cliente:</strong> <span></span></li>
                    <li id="project-services" class="mb-1 d-none"><strong>Servicios:</strong> <span></span></li>
                    <li id="project-tech" class="mb-1 d-none"><strong>Tecnologías:</strong> <span></span></li>
                </ul>

                <a href="/portfolio.html" class="btn btn-outline-primary btn-sm">← Volver al portfolio</a>
            </div>

            <div class="col-12 col-md-6 text-center">
                <img id="project-cover" src="" alt="" class="img-fluid rounded shadow" width="960" height="540"
                    loading="eager">
            </div>
        </header>

        <!-- Contenido largo -->
        <section class="row g-4">
            <div class="col-12 col-lg-8">
                <article class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="h4 mb-3">Resumen</h2>
                        <div id="project-description" class="text-body-secondary">
                            <!-- Aquí va la descripción larga (HTML seguro o texto) -->
                        </div>
                    </div>
                </article>
            </div>

            <aside class="col-12 col-lg-4">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h3 class="h6 text-uppercase text-muted mb-3">Galería</h3>
                        <div id="project-gallery" class="row g-3">
                            <!-- Thumbs -->
                        </div>
                    </div>
                </div>
            </aside>
        </section>

        <section id="project" class="py-5">
            <div class="container">
                <div class="mb-4">
                    <a href="/portfolio.html" class="btn btn-outline-secondary btn-sm">← Volver al portfolio</a>
                </div>

                <div class="row align-items-start g-4">
                    <!-- Col izquierda: texto -->
                    <div class="col-12 col-lg-7">
                        <h1 class="display-5 fw-bold mb-3" data-bind="title">Cargando…</h1>
                        <p class="lead text-muted mb-4" data-bind="description"></p>

                        <!-- contenido enriquecido opcional (desde JSON: content_html) -->
                        <div class="mb-4" data-bind-html="content_html"></div>

                        <!-- lista de tecnologías opcional -->
                        <ul class="list-inline mb-4" data-bind-list="tech"></ul>

                        <!-- CTAs opcionales -->
                        <div class="d-flex gap-2 flex-wrap">
                            <a class="btn btn-primary" data-bind-href="demo_url" target="_blank" rel="noopener">Ver
                                demo</a>
                            <a class="btn btn-outline-primary" data-bind-href="case_url">Leer caso</a>
                        </div>
                    </div>

                    <!-- Col derecha: imagen/galería -->
                    <div class="col-12 col-lg-5 text-center">
                        <img class="img-fluid rounded-3 shadow" data-bind-src="image" data-bind-alt="image_alt" alt=""
                            loading="lazy">
                        <!-- galería opcional -->
                        <div class="row row-cols-2 g-2 mt-2" data-bind-gallery="gallery"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-dark text-white pt-5 pb-4">
        <!-- Footer -->
        <div class="container">
            <!-- Footer -->
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="d-flex align-items-center mb-3">
                        <img src="assets/images/logos/logo-1.webp" alt="Logo de Marcos Espinoza" width="40" height="40"
                            class="me-2">
                        <span class="fs-4 fw-bold" data-i18n="footer_titulo">Marcos Espinoza</span>
                    </div>
                    <p class="text-muted" data-i18n="footer_parrafo">Desarrollo y diseño web profesional para ayudarte a
                        crecer.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3" data-i18n="footer_enlaces_rapidos">Enlaces Rápidos</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="servicios.html" class="text-decoration-none text-muted"
                                data-i18n="nav_servicios">Servicios</a></li>
                        <li class="mb-2"><a href="portfolio.html" class="text-decoration-none text-muted"
                                data-i18n="nav_portfolio">Portafolio</a></li>
                        <li class="mb-2"><a href="sobre-mi.html" class="text-decoration-none text-muted"
                                data-i18n="nav_sobre_mi">Sobre Mí</a></li>
                        <li class="mb-2"><a href="contacto.html" class="text-decoration-none text-muted"
                                data-i18n="nav_contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="fw-bold mb-3" data-i18n="footer_sigueme">Sígueme</h5>
                    <a href="#" class="text-decoration-none me-3" aria-label="LinkedIn"><i
                            class="bi bi-linkedin fs-4 text-white"></i></a>
                    <a href="#" class="text-decoration-none me-3" aria-label="GitHub"><i
                            class="bi bi-github fs-4 text-white"></i></a>
                    <a href="#" class="text-decoration-none me-3" aria-label="Instagram"><i
                            class="bi bi-instagram fs-4 text-white"></i></a>
                    <a href="#" class="text-decoration-none me-3" aria-label="Twitter"><i
                            class="bi bi-twitter-x fs-4 text-white"></i></a>
                </div>
            </div>
            <!-- // end // -->

            <!-- Copyright -->
            <hr class="border-secondary mt-2 mb-3">
            <div>
                <div class="row align-content-center align-items-center justify-content-around">
                    <div class="col-md-6 md-6">
                        <p class="mb-0 text-muted" data-i18n="footer_copyright">© 2025 Marcos Espinoza. Todos los
                            derechos reservados.</p>
                    </div>
                    <div class="col-md-6 md-6 d-flex justify-content-end">
                        <a href="legal/politica-privacidad.html" class="text-muted me-3">Política de Privacidad</a>
                        <a href="legal/terminos-condiciones.html" class="text-muted me-3">Términos y Condiciones</a>
                        <a href="legal/cookies.html" class="text-muted">Política de Cookies</a>
                    </div>
                </div>
            </div>
            <!-- // end copyright // -->
        </div>
        <!-- // end footer // -->
    </footer>

    <!-- Bootstrap & Custom Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/main.js"></script>

    <!-- Script dinámico -->
    <script>
        (function () {
            const JSON_URL_DEFAULT = '/assets/data/portfolio/projects.json';

            function slugify(s = '') {
                return String(s).toLowerCase()
                    .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
                    .replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '');
            }

            function getSlug() {
                // 1) ?slug=...  2) último segmento de la ruta (sin .html)
                const q = new URLSearchParams(location.search);
                if (q.get('slug')) return q.get('slug');
                const seg = location.pathname.split('/').filter(Boolean).pop() || '';
                return seg.replace(/\.html?$/i, '');
            }

            function pick(items, slug) {
                // Busca por item.slug; si no hay, intenta por título slugificado
                return items.find(p => p.slug === slug)
                    || items.find(p => slugify(p.title || p.name || '') === slug);
            }

            function setText(sel, text) {
                const el = document.querySelector(sel);
                if (el && text) el.textContent = text;
            }

            function setAttr(sel, attr, val) {
                const el = document.querySelector(sel);
                if (el && val) el.setAttribute(attr, val);
            }

            function fillBindings(project) {
                // Texto básico
                document.querySelectorAll('[data-bind]').forEach(el => {
                    const key = el.getAttribute('data-bind');
                    if (key && project[key]) el.textContent = project[key];
                });

                // HTML enriquecido (si lo usas)
                document.querySelectorAll('[data-bind-html]').forEach(el => {
                    const key = el.getAttribute('data-bind-html');
                    if (key && project[key]) el.innerHTML = project[key];
                });

                // Atributos: src/alt/href
                document.querySelectorAll('[data-bind-src]').forEach(el => {
                    const key = el.getAttribute('data-bind-src');
                    const v = resolveImage(project[key], project);
                    if (v) el.src = v;
                });
                document.querySelectorAll('[data-bind-alt]').forEach(el => {
                    const key = el.getAttribute('data-bind-alt');
                    const v = project[key] || project.title || 'Proyecto';
                    if (v) el.alt = v;
                });
                document.querySelectorAll('[data-bind-href]').forEach(el => {
                    const key = el.getAttribute('data-bind-href');
                    const v = project[key];
                    if (v) el.href = v; else el.style.display = 'none';
                });

                // Lista de tecnologías (array)
                document.querySelectorAll('[data-bind-list]').forEach(ul => {
                    const key = ul.getAttribute('data-bind-list');
                    const arr = project[key];
                    if (Array.isArray(arr) && arr.length) {
                        ul.innerHTML = arr.map(t => `<li class="list-inline-item badge text-bg-light">${t}</li>`).join('');
                    } else {
                        ul.remove();
                    }
                });

                // Galería (array de imágenes)
                document.querySelectorAll('[data-bind-gallery]').forEach(row => {
                    const key = row.getAttribute('data-bind-gallery');
                    const gal = project[key];
                    if (Array.isArray(gal) && gal.length) {
                        row.innerHTML = gal.slice(0, 8).map(img => {
                            const src = resolveImage(img, project);
                            const alt = (typeof img === 'object' && img.alt) || project.title || 'Proyecto';
                            return `<div class="col"><img src="${src}" alt="${alt}" class="img-fluid rounded-2" loading="lazy"></div>`;
                        }).join('');
                    } else {
                        row.remove();
                    }
                });

                // Meta dinámicos (mejores para UX social; para SEO ideal es generar estático)
                const title = project.title || 'Proyecto';
                const desc = project.description || project.excerpt || '';
                const ogImg = resolveImage(project.og_image || project.image, project);
                document.title = `${title} | Portfolio`;
                setAttr('meta[name="description"]', 'content', desc);
                setAttr('meta[property="og:title"]', 'content', title);
                setAttr('meta[property="og:description"]', 'content', desc);
                if (ogImg) setAttr('meta[property="og:image"]', 'content', new URL(ogImg, document.baseURI).href);
                setAttr('link[rel="canonical"]', 'href', location.href);
            }

            function resolveImage(img, project) {
                if (!img) return '';
                if (typeof img === 'string') return img;
                if (typeof img === 'object') return img.webp || img.jpg || img.src || '';
                return '';
            }

            async function init() {
                const slug = getSlug();
                const jsonUrl = JSON_URL_DEFAULT; // o data-attr si quieres hacerlo configurable
                try {
                    const res = await fetch(jsonUrl, { cache: 'no-store' });
                    if (!res.ok) throw new Error('HTTP ' + res.status);
                    const data = await res.json();
                    const items = Array.isArray(data) ? data : (data.projects || data.items || (data.data && data.data.projects) || []);
                    const project = pick(items, slug);

                    if (!project) {
                        // Estado 404 suave
                        setText('[data-bind="title"]', 'Proyecto no encontrado');
                        setText('[data-bind="description"]', 'El proyecto solicitado no existe o fue movido.');
                        document.querySelector('[data-bind-src]')?.remove();
                        return;
                    }
                    fillBindings(project);
                } catch (e) {
                    console.error('Error cargando proyecto:', e);
                    setText('[data-bind="title"]', 'Error al cargar');
                    setText('[data-bind="description"]', 'No fue posible cargar la información del proyecto.');
                }
            }

            document.addEventListener('DOMContentLoaded', init);
        })();
    </script>
</body>

</html>